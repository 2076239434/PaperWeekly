# Machine and deep learning methods for radiomics

Michele Avanzo et al.

## 0. Abstract

Radiomics is an emerging area in quantitative image analysis that aims to relate large-scale extracted imaging information to clinical and biological endpoints. The development of quantitative imaging methods along with machine learning has enabled the opportunity to move data science research towards translation for more personalized cancer treatments. Accumulating evidence has indeed demonstrated that noninvasive advanced imaging analytics, that is, radiomics, can reveal key components of tumor phenotype for multiple three-dimensional lesions at multiple time points over and beyond the course of treatment. These developments in the use of CT, PET, US, and MR imaging could augment patient stratification and prognostication buttressing emerging targeted therapeutic approaches. In recent years, deep learning architectures have demonstrated their tremendous potential for image segmentation, reconstruction, recognition, and classification. Many powerful open-source and commercial platforms are currently available to embark in new research areas of radiomics. Quantitative imaging research, however, is complex and key statistical principles should be followed to realize its full potential. The field of radiomics, in particular, requires a renewed focus on optimal study design/reporting practices and standardization of image acquisition, feature calculation, and rigorous statistical analysis for the field to move forward. In this article, the role of machine and deep learning as a major computational vehicle for advanced model building of radiomics-based signatures or classifiers, and diverse clinical applications, working principles, research opportunities, and available computational platforms for radiomics will be reviewed with examples drawn primarily from oncology. We also address issues related to common applications in medical physics, such as standardization, feature extraction, model building, and validation.

在定量影像分析中，影像组学是一个正在兴起的领域，其目标是将大规模提取出来的成像信息与临床和生物学的终点联系起来。定量成像方法的发展与机器学习一起，使得数据科学研究向更加个性化的肿瘤治疗的迁移成为可能。越来越多的证据表明，非侵入性的高级影像分析，即，影像组学，可以对多个三维损伤，在多个时间点，包括治疗中和治疗后，展示肿瘤表型的关键部分。在CT、PET、US和MR影像使用的发展，可以增强患者的分层和预后，目标治疗方法就会出现。近年来，深度学习架构在图像分割、重建、识别和分类中的巨大潜力得到来证明。很多强力的开源商用平台目前都可用了，可以进行影像组学的新研究领域。但是，定量影像研究是复杂的，关键的统计原则应当随后实现其完整潜力。影像组学的领域，特别需要重新关注图像获取、特征计算和严格的统计分析，这些的最佳研究，才能将这个领域更进一步。本文中，我们用肿瘤学中的例子，回顾了机器学习和深度学习作为一种主要的计算工具，进行基于影像组学的标签或分类器的高级模型构建，多样化的临床应用，工作原则，研究机会和可用的计算平台。我们还会涉及到医学物理中的常见应用，如标准化，特征提取，模型构建和验证。

**Key words**: deep learning, machine learning, quantitative image analysis, radiomics

## 1. Introduction

Radiomics is an emerging area in quantitative image analysis that aims to relate large-scale data mining of images to clinical and biological endpoints. The fundamental idea is that medical images are much richer in information than what the human eye can discern. Quantitative imaging features, called also “radiomic features” can provide richer information about intensity, shape, size or volume, and texture of tumor phenotypes using different imaging modalities (e.g., MRI, CT, PET, ultrasound, etc.). Tumor biopsy-based assays provide limited tumor characterization as the extracted sample may not always represent the heterogeneity of the whole patient’s tumor, while radiomics can comprehensively assess the three-dimensional (3D) tumor landscape by means of extracting relevant imaging information. It implies that, applying well-known machine learning methods to radiomic features extracted from medical images, it is possible to macroscopically decode the phenotype of many physio-pathological structures and, in theory, solve the inverse problem of inferring the genotype from the phenotype, providing valuable diagnostic, prognostic, or predictive information.

影像组学是量化图像分析中一个正在兴起的领域，其目标是将大规模数据挖掘与临床和生物学的终点联系起来。其基本思想是，医学图像所包含的信息，比人眼可以观察到的要多。定量的图像特征，也称为影像组学特征，可以在灰度、形状、大小或体积、肿瘤表型的纹理上，使用不同的图像模态（如，MRI，CT，PET，超声等）给出更丰富的特征。肿瘤基于活体的检查只能提供有限的肿瘤特征，因为提取的样本不能一直代表病人整个肿瘤的异质性，而影像组学可以通过提取相关的影像信息综合评估肿瘤的3D形状。这意味着，对医学图像中提取出来的影像组学特征使用众所周知的机器学习方法，可能从微观上对很多生理病理学结构的表型进行解码，且理论上，可以解答从表型推断基因型的逆问题，给出宝贵的诊断、预后或预测信息。

The term radiomics originated from other — omics sciences (e.g., genomics and proteomics) and conveys the clear intent to invoke personalized medicine based on medical images. It traces its roots to computer-aided detection/diagnosis (CAD) of medical images. However, with recent advances and the diversity of medical imaging acquisition technologies and processing, radiomics is establishing itself as an indispensable image analysis and understanding tool with applications that transcend diagnosis into prognosis and prediction approaches for personalizing patients’ management and their treatment. One of the main differentiators from CAD consists of the link that radiomics has to establish between the current features of a physio-pathological structure at the time of investigation and its temporal evolution in order to personalize the therapeutical approach. The recent availability of large databases of digital medical images and annotated information (e.g., evolution over time or response to treatment with a given prescription, clinical, and survival information), the increase in computational power based on advanced hardware (e.g., GPU, cluster or cloud computing) as well as the tremendous mathematical and algorithmic development in areas like machine or deep learning have created favorable conditions to untap the potential of the enormous amount of imaging data wealth that is being generated.

影像组学这个术语起源于其他组学科学中，如基因组学，蛋白质组学，其目的很明显，是要基于医学影像达到个性化的医学的目的。其根源于医学图像的计算机辅助检测/诊断(CAD)，但是，随着最近的进展和医学影像获取技术和处理的多样化，影像组学正在变成一种必不可少的图像分析和理解的工具，其应用已经超越了诊断，包含了病人个性化管理的和治疗的预后和预测。与CAD的主要区别包括，影像组学已经确立了，检查时的生理病理学结构的特征，与随时间演化之间的关系，以个性化病人的治疗方法。最近医学图像及其标注信息的大型数据集的可用性（如，随着时间的演化，或对治疗的响应，在给定处方下，给定的临床和生存信息），基于先进硬件的计算能力的增加（如，GPU，云计算集群），以及在机器学习、深度学习等领域的数学和算法进展，为释放大量医学影像数据的潜力，创造了很好的条件。

Certainly, the complementarity of other information such as clinical or laboratory data as well as interaction measurements (e.g., radiogenomics, relating imaging to genomics, or exposomics, that is the complementary information from the interaction of the patient with environmental variables) will play a key role to drive future success of radiomics, such as accuracy and reproducibility, to levels that are acceptable for routine clinical practice.

当然，其他信息的互补性，如临床或实验室数据，以及交互测量（如，基因影像组学，将影像与基因组学联系到一起，或exposomics，是患者与环境变量的补充信息），会推动影像组学未来的成功，比如在准确率和可复制性上，达到临床可以接受的层次。

Radiomics has been applied to many diseases including cancer and neurodegenerative diseases to name a few. Although the examples drawn here are from the cancer field, the principles presented here are generally universal across the medical imaging domain. The number of publications issued in the last years has grown almost exponentially. Although there are many review articles already about radiomics, its definition, technical details, and applications in different areas of medicine, the view of radiomics as an image mining tool lends itself naturally to application of machine/deep learning algorithms as computational instruments for advanced model building of radiomics-based signatures. This will be the main subject of this article, addressing issues related to common applications in medical physics, standardization, feature extraction, model building, and validation.

影像组学已经应用于很多疾病，包括肿瘤和神经退行性疾病。虽然这里使用的例子是癌症治疗领域的，这里给出的一般是通用规则，适用于所有医学成像领域。过去几年发表刊物的数量几乎是以指数级增长。虽然已经有很多关于影像组学的综述文章，其定义，技术细节和在医学不同领域的应用，影像组学作为一种图像挖掘工具，很自然的有很多机器学习/深度学习的算法的应用，可以进行高级模型构建的基于影像组学的标签。这是本文的主要主题，处理在医学物理、标准化、特征提取、模型构建和验证等常见应用相关的问题。

## 2. Overview of the research and clinical applications of cancer radiomics

In this section the applications of radiomics to tumor detection and characterization and prediction of outcome will be reviewed. All the studies described are retrospective and mono-institutional, except where noted. 本节中，综述影像组学在肿瘤检测和特征和结果预测方面的应用。这里描述的所有研究都是回顾性的和单一机构的，除了另有表述的地方。

### 2.1. Radiomics in diagnosis

#### 2.1.1. Cancer detection and auto contouring

The radiomics approach of combining the extraction of radiomic features with machine learning, can be used either to detect/diagnose cancer or to automatically contour the tumor lesion. Methods for radiomics-driven automatic prostate tumor detection typically use a supervised method trained on a set of features calculated from multimodality images. For detection of prostate cancer, features were computed in a 3 × 3 pixels sliding window in multimodal MRI of prostate. The voxels were tagged as cancerous or noncancerous using a support vector machine (SVM) classifier. In Algohary et al., the prostate was segmented into areas according to the aggressiveness between malignant and normal regions in the training groups. A voxelwise random forest model (RF) with a conditional random field spatial regulation was used to classify the voxels in multimodal MRI (T1, Contrast — Enhanced (CE) T1, T2, and FLAIR) of the brain of glioblastoma multiforme (GBM) patients into five classes: nontumor region and four tumor subregions including necrosis, edema, nonenhancing area, and enhancing area. Convolutional neural networks have also been applied to segment organs at risk in head and neck cancer radiotherapy and in lung and liver cancers compared to traditional methods.

将影像组学特征的提取与机器学习结合起来的影像组学方法，可以用于检测/诊断肿瘤，或自动勾画肿瘤病变。影像组学驱动的自动前列腺肿瘤检测，一般使用有监督方法，在从多模态上计算出来的一组特征进行训练得到。对于前列腺癌症的检测，特征的计算是在3×3像素的滑窗上，在多模态的肿瘤MRI上计算得到的。使用SVM分类器将每个体素标记为肿瘤还是非肿瘤。Algohary等人对前列腺区域的分割，是根据训练数据中恶性区域和正常区域的攻击性的。逐体素的随机森林模型，和条件随机场空间正则化，用于在多形性胶质母细胞瘤的脑部多模态MRI中分类体素，分类成5类：非肿瘤区域，和四种肿瘤子区域，包括坏死区域，水肿区域，非增强区域和增强区域。CNN也用于在肿瘤放射治疗中分割头颈部OAR，和肺部、肝脏肿瘤。

#### 2.1.2 Prediction of histopathology and tumor stage 组织病理学和肿瘤阶段预测

Radiomics holds the potential to revolutionize the conventional tumor characterization and replace classic approaches based on macroscopic variables and can be used to distinguish between malignant and benign lesions. Breast cancer lesions, automatically detected using connected component labeling and adaptive fuzzy region growing algorithm, were classified using radiomic features as benign mass or malignant tumor on digital mammography, dynamic contrast-enhanced (DCE) MRI, and ultrasound. A radiomic model based on mean apparent diffusion coefficient (ADC), had better accuracy than radiologist assessment for characterization of prostate lesions as clinically significant cancer (Gleason grade group ≥ 2) during prospective MRI interpretation. A deep learning multiparametric MRI transfer learning method has also shown the ability to classify prostate cancer high grade/low or grade. Radiomic models based on CT images have been used to predict the histopathology (adenocarcinoma or squamous cell carcinoma) and PET tumor stage of lung cancer as well as micropapillary patterns in lung adercarcinomas.

影像组学有潜力革新传统的肿瘤定性方法，替代经典的基于宏观变量的方法，可以用于分辨恶性及良性肿瘤病变。乳腺癌病变，使用联通组件标记和自适应模糊区域增长算法进行自动检测，使用影像组学特征可以分类为良性肿瘤或恶性肿瘤，影像模态为数字乳腺摄影，动态对比度增强MRI，和超声。一种基于mean apparent diffusion coefficient(ADC)影像组学模型，使用MRI进行解释中，在前列腺病变上的刻画上（临床显著的肿瘤，Gleason等级≥2）比放射医生的评估有更好的准确率。一种深度学习多参数MRI迁移学习方法，也表现出了对前列腺肿瘤高等级/低等级的分类能力。基于CT影像的影像组学模型，已经用于预测组织病理学和肺癌的PET肿瘤分级，以及肺副癌的微乳头状模式。

#### 2.1.3. Microenvironment and intra-tumor partitioning

A radiomic signature combining features from CE-CT, and 18F-FDG PET was implemented for the presence of high level of hypoxia in head and neck cancer, defined in terms of maximum tumor-to-blood uptake ratio > 1.4 in the 18F-FMISO PET. Classification and clustering methods have been developed for tumor separation into subregions (habitat imaging), which contributes to the revelation of tumor heterogeneity, and potential selection of subregions to boost radiation dose. A radiomics analysis focused on a characterization of GBM diversity, using various diversity indices to quantify habitat diversity of the tumor as well as to relate it to underlying molecular alterations and clinical outcomes.

一种结合了CE-CT和18F-FDG PET特征的影像组学标签，在头颈部肿瘤高度缺氧的情况下进行了实现，在18F-FMISO PET中以最高肿瘤到血液的吸收率大于1.4的情况下定义的。已经开发了分类和聚类方法，将肿瘤区分成子区域(habitat imaging)，这对于肿瘤异质性的披露是有贡献的，以及选择子区域来增强辐射剂量。一种关注GBM多样性特征的影像组学分析，使用各种多样性指标来量化肿瘤的habitat多样性，以及将其与潜在的分子改动与临床成果相结合。

#### 2.1.4. Tumor genotype 肿瘤基因型

Significant associations between the radiomic features and gene-expression patterns were found in lung cancer patients. A radiogenomic study demonstrated the associations of radiomic phenotypes with breast cancer genomic features as mitochondrial DNA (miRNA) expressions, protein expressions, gene somatic mutations, and transcriptional activities. In particular, tumor size and enhancement texture had associations with transcriptional activities of pathways and miRNA expressions. Radiomic models were implemented for identification of Epithelial Growth Factor Receptor (EGFR) mutant status from CT through multiple logistic regression and pairwise selection and to decode ALK (anaplastic lymphoma kinase), ROS1 (c-ros oncogene 1), or RET (rearranged during transfection) fusions in lung adenocarcinoma.

在肺癌患者中，发现了影像组学特征和基因表达模式的显著关联。一个影像基因组学的研究表明，影像组学的表型与乳腺癌的基因特征是有关联的，如线粒体DNA表示，蛋白质表达式，基因体细胞变异和转录行为。特别是，肿瘤大小和增强纹理与转录行为是有关联的。影像组学模型用于从CT中识别EGFT变异状态，用的是多logitstic回归和成对选择以解码ALK，ROS1或RET。

Triple-negative breast cancer (TNBC) is likely to be identified by considering heterogeneity of background parenchymal enhancement, characterized by quantitative texture features on DCE-MRI, adds value to such differentiation models as they are strongly associated with the TNBC subtype. Furthermore, TNBC has been proven to be differentiated from fibroadenoma using ultrasound (US) radiomics. A radiomics score obtained by penalized logistic regression with a least absolute shrinkage and selection operator. (LASSO) analysis showed significant difference between fibroadenoma and TNBC. The extraction of radiomic features from MR of GBM was able to predict immunohisto-chemically identified protein expression patterns.

TNBC，很可能通过背景实质增强的异质性得到识别，其特征是在DCE-MRI上的定量纹理特征，对这样的差分模型增加值，因为它们与TNBC子型相关性很强。特别是，TNBC已经证明与纤维腺瘤可以通过超声影像组学进行区分。通过用最小绝对收缩和选择算子，惩罚逻辑回归，得到一个影像组学分数。LASSO分析表明，在纤维腺瘤和TNBC间有显著区别。从MR中提取的影像组学特征可以预测免疫组织化学识别的蛋白质表达模式。

Despite large evidence of association among radiomics and genomics, few preclinical studies have demonstrated causal relationship between tumor genotype and radiomic. In one study, HCT116 colorectal carcinoma cells were grown as xenografts in the flanks of NMRI-nu mice. Then overexpression of GADD34 gene was induced by administration of HCT116 doxycycline (dox), or placebo was given. The radiomic analysis demonstrated that that gene overexpression causes change in radiomic features, as many features differed significantly between the dox-treated and placebo groups.

尽管影像组学和基因组学与很大的关联性，但很少有临床前的研究证明在肿瘤基因型和影像组学间的因果联系。在一个研究中，HCT116结直肠肿瘤细胞长成了异种移植，在老鼠的NMRI-nu的侧翼。GADD34基因的过度表达，是通过HCT116 doxycycline (dox)的管理引导来的，或给了安慰剂。影像组学分析表明，基因过度表达导致影像组学特征的变化，因为很多特征在dox-treated和安慰剂组表现非常明显。

#### 2.1.5. Clinical and macroscopic variables

Radiomic features, derived from T2-w and ADC MRI scan, correlate with clinical variables that are relevant for patient’s prognosis. These include prostate specific antigen (PSA) level in patients with prostate cancer, and Human Papilloma Virus (HPV) Status in head and neck squamous cell carcinoma. Given the well-known behavior of HPV-positive head and neck cancer which is likely to respond at a lower dose of chemoradiation, this opens the way to a CT-based patient stratification for a dose de-escalation.

从T2-w和ADC MRI扫描中推导得到的影像组学特征，与患者预后相关的临床变量，是有相关性的。这包括病人带有前列腺肿瘤的前列腺相关的抗原(PSA)水平，和头颈部鳞状细胞癌的HPV状态。广为所知的HPV正值的头颈部肿瘤，对更低剂量的放化疗很可能有响应，这开启了基于CT的患者分级进行剂量降级的路径。

### 2.2. Radiomics in therapy

Because radiomic features can describe histology and genetic footprint of the tumor, which are correlated with the tumor aggressiveness, they can be used to build models to predict the outcome, in terms of local/distant control or survival, of cancer therapy performed with various therapeutic options (radio-, chemotherapy, targeted molecular therapy, immunotherapy, nonionizing radiation) or a combination of them.

因为影像组学特征可以描述肿瘤的组织学和基因足迹，与肿瘤的攻击性是相关的，他们可以用于构建模型以预测输出，以各种治疗方式的肿瘤治疗的局部/远处控制，或存活率（放疗，化疗，靶向分子治疗，免疫疗法，非电离辐射）或其组合。

#### 2.2.1. Local control, response, and recurrence

Radiomics predicts response to neoadjuvant chemoradiation assessed at time of surgery for nonsmall cell lung cancer (NSCLC) and locally advanced rectal cancer. Local control in patients treated with stereotactic radiotherapy for lung cancer was described using a PET and CT signature developed by using supervised principal component analysis and developed using features from PET and CT. A radiomic model was developed using first-order statistics, GLCM, and geometrical measurements computed in T2-w and ADC 3T MRI by RF approach for biochemical recurrence of prostate cancer after radiotherapy. A total of 126 radiomic features were extracted using GLCM, GLGCM, Gabor transform, and GLSZM from contrast-enhanced 3T MRI using T1-w, T2-w, and DWI sequences to predict the therapeutic response of nasopharyngeal carcinoma (NPC) to chemoradiotherapy. Deep learning methods with radiomics are also proposed to predict outcomes after liver and lung cancer radiotherapy.

影像组学预测新辅助放化疗的反应，对非小细胞肺癌(NSCLC)和局部先进直肠癌，在手术时进行评估。患者在肺癌中用立体定向放射治疗的局部控制，使用PET和CT标签描述，标签是使用PET和CT的特征，用监督的PCA得到的。一种影像组学模型，用于放射治疗后的直肠癌生物化学复发，是使用一阶统计GLCM得到，几何度量是用T2-w计算得到的，ADC 3T MRI是通过RF方法得到的。使用GLCM、GLGCM、Gabor变换和GLSZM从对比度增强的3T MRI，使用T1-w，T2-w和DWI序列，得到了共计126个影像组学特征，预测鼻咽癌对放化疗的治疗响应。使用影像组学的深度学习方法，也提出在肝癌和肺癌放射治疗后进行预测输出。

#### 2.2.2. Distant metastases

Radiomic models to predict the development of distant metastases (DM) from NSCLC on patients treated with Stereotactic Body Radiotherapy (SBRT) patients for lung cancer were developed using features from CT or from PET-CT. Vallieres et al. used texture-based model for the early evaluation of lung metastasis risk in soft-tissue sarcomas from pretreatment FDG-PET and MRI scans comprising T1-w and T2-w fat-suppressed sequences (T2FS). A radiomic signature was developed to predict DM after locally advanced adenocarcinoma. Analysis of the peritumoral space can provide valuable information regarding the risk of distant failure, as more invasive tumors may have different morphologic patterns in the tumor periphery. An SVM classifier was trained to predict distant failure from radiomics analysis of the peritumoral space.

对NSCLC患者中，在病人使用SBRT治疗后，使用CT或PET-CT中提取的特征，也开发出了预测远端转移的放射组学模型。Vallieres等使用基于纹理的模型，进行软组织肉瘤的肺部转移的风险的早期评估，使用的影像是预治疗的FDG-PET和MRI，由T1-w和T2-w脂肪抑制的序列(T2FS)。提出了影像组学标签，在局部推进的腺癌中，来预测远端转移。瘤周空间的分析，可以提供关于远端失败风险的重要信息，因为更具有侵略性的肿瘤，可能在肿瘤外围有不同的形态学模式。训练了一个SVM分类器，来从瘤周空间的影像组学分析，预测远端失败。

#### 2.2.3. Survival

Aerts et al. built a radiomic signature consisting of a combination of four features in a retrospective lung cancer cohort, which was predictive for survival in head and neck and NSCLC independent cohorts. One textural feature calculated from GLCM, SumMean, was identified using the LASSO procedure as an independent predictor of overall survival that complements metabolic tumor volume (MTV) in decision tree. A radiomic signature was built from PET-CT for survival after SBRT for lung cancer. Deep learning was also proposed to stratify NSCLC patients according to mortality risk using standard of care CT.

Aerts等构建了一个影像组学标签，包含回顾性肺癌患者的四个特征的组合，可以预测头颈部和NSCLC独立的患者的存活率。一种从GLCM、SumMean计算得到的纹理特征，使用LASSO过程识别出来，可以独立预测的总体存活率，与决策树中的代谢肿瘤体积有互补关系。从PET-CT构建了一个影像标签，预测肺癌经过SBRT后的存活率。也提出了深度学习对NSCLC病人根据死亡率风险进行分类，使用的是标准的care CT。

#### 2.2.4. Molecular targeted therapy 分子靶向治疗

Many tumors commonly overexpress oncogenes such as the EGFR and respond to molecular targeted therapies such as EGFR tyrosine kinase inhibitor. From the change in features between the CT acquisitions before and 3 weeks after therapy it was possible to identify NSCLC patients responding to treatment with gefitinib. A radiomic prediction model was designed to stratify patients according to progression-free and overall survival after therapy with antiangiogenic for GBM.

很多肿瘤通常会过度表达，比如EGFR，对分子靶向治疗会有响应，如EGFR tyrosine kinase inhibitor。从治疗前后3周的CT影像的特征变化，可能识别NSCLC病人对gefitinib治疗的响应。设计了一个影像组学预测模型，来根据使用antiangiogenic for GBM的治疗后的progression-free和总体存活率来对病人进行分类。

#### 2.2.5. Immunotherapy 免疫治疗

Cancer immunotherapy by immune checkpoint blockade is a promising treatment modality that is currently under strong development, and there is a great need for models to select patients responding to immunotherapy. In a retrospective multi-cohort study, an eight-feature radiomic signature predictive of the presence of CD8 T cells, which is related to the tumor-immune phenotype, was developed from CE-CT images, using elastic-net regularized regression method. The signature was successfully validated on external cohorts for discrimination of immune phenotype, and for the prediction of survival and response to anti-PD-1 or PD-L1 immunotherapy.

通过免疫检查点封锁的癌症免疫治疗，是一种有希望的治疗模态，目前正在进行很多研发，在选择对免疫治疗有反应的病人上，非常需要这样的模型。在一个回顾性多患者研究中，从CE-CT影像中，使用elastic-net正则化的回归方法，提取了8个特征的影像组学标签，可以预测CD8 T细胞的存在，这与肿瘤免疫表型相关。标签在外部人群中成功的得到了验证，区分了免疫表型，预测了对anti-PD-1或PD-L1免疫治疗的存活率和响应。

#### 2.2.6 Delta-radiomics

The longitudinal study of features and of their change during the treatment, with the goal of predicting response to therapy, is called delta-radiomics. Features calculated from pretreatment and weekly intra-treatment CT change significantly during radiation therapy (RT) for NSCLC. Delta radiomics could possibly be performed by the Cone Beam CT (CBCT) devices for image guidance of radiotherapy treatment, thus allowing large-scale study of tumor response to total dose, fractionation and fraction dose. It has been shown that reproducible features can be extracted from CBCT predictive for overall survival in NSCLC patients as much as features from CT. Nevertheless, the studies on CBCT delta-radiomics are still limited to assessment of feasibility and reproducibility.

特征及其在治疗过程中的变化的纵向研究，其目的是预测对治疗的响应，称为delta影像组学。从预治疗和每周的分次治疗的CT变化计算得到的特征，对于NSCLC的放射治疗期间变化明显。Delta影像组学可以可以通过CBCT设备进行，进行影像引导的放射治疗，因此允许大规模研究肿瘤对总体剂量，分次和分次剂量的治疗响应。已经表明，可以从CBCT中提取出可复制的特征，可以预测NSCLC病人的总体存活率，与CT中可预测的一样多。尽管如此，在CBCT delta影像组学中的研究仍然是有限的，可行性和可重复性都很少。

#### 2.2.7. Prediction of side effects

Radiomics-based models can help early identify the development of side effects such as radiation induced lung injury (RILI). The change from pre- to posttreatment (at 3, 6, and 9 months) CT features significantly correlates with lung injury as scored by oncologist post-SBRT for lung cancer and was found to be correlated with dose and fractionation.

基于影像组学的模型可以帮助识别副作用的发展，如放射引起的肺损伤。治疗前和治疗后（在3，6，9月）的CT特征的变化，明显与肺部损伤相关性很大，肿瘤学家在SBRT后对肺癌进行了评分，表明了这样的结果，而且与剂量和分次也都有相关。

A logistic regression-based classifier was constructed to combine information from multiple features to identify patients that will develop grade ≥ 2 radiation pneumonitis among those who received RT for esophageal cancer. The addition of normal lung image features produced superior model performance with respect to traditional dosimetric and clinical predictors of radiation pneumonitis (RP), suggesting that pretreatment CT radiomic features should be considered in the context of RP prediction. CT radiomic features were extracted from the total lung volume defined using the treatment-planning scan for RP.

构建了一种基于逻辑回归的分类器，将多个特征的信息结合到一起，以识别患者，会得到对食道癌的患者接受放射治疗的会产生级别≥ 2的放射性肺炎。正常肺部图像特征的叠加，会产生非常好的模型性能，这是与传统放射性肺炎的剂量和临床预测器相比得到的，说明预治疗CT影像组学特征，应当在RP预测的上下文中考虑。从总肺提取了CT影像组学特征，使用了RP用的治疗计划扫描。

#### 2.2.8. Differentiation of recurrence from benign changes

The differentiation of tumor recurrence from benign radiation-induced changes in follow-up images can be a major challenge for the clinician. A radiomic signature consisting of five image-appearance features from CT demonstrated high discriminative capability to differentiate recurrence of lung tumor from consolidation and opacities in SBRT patients. Similarly, a combination of five radiomic features from CE-T1w and T2w MR were found to be capable of distinguishing necrosis from progression in follow-up MR images in patients treated with Gamma Knife radiosurgery for brain metastases.

从放射引起的良性肿瘤复发的区分，随着随后的图像进行变化，对于临床医生是一个主要挑战。影像组学标签包含五种CT图像外观特征，这个标签证明了对于区分肺部肿瘤的复发具有很强的区分能力，这是对SBRT病人进行的。类似的，从CE-T1w和T2w MR得到的五种影像组学特征的组合，可以在随后的MR图像中区分necrosis和progression，这是对Gamma刀进行脑补转移瘤的治疗的病人进行的。

#### 2.2.9. Nonionizing radiation and other therapies

Radiomic features in MRI respond differently when Laser interstitial thermal therapy (LITT), a highly promising focal strategy for low-grade, organ-confined prostate cancer, is performed on cancer or healthy prostate tissue. A radiomic signature then could allow to assess if prostate cancer is successfully ablated. A radiomic model was predictive of complete response after transcatheter arterial chemoembolisation combined with high-intensity focused ultrasound treatment in hepatocellular carcinoma.

在MRI中的影像组学特征，在对肿瘤或健康前列腺组织使用LITT治疗时，响应非常不一样。影像组学标签可以评估前列腺肿瘤是否成功的分离了。影像组学模型可以对肝细胞癌使用某治疗后预测完整的响应。

## 3. Radiomics analysis with machine and deep learning methods

### 3.1 Preprocessing

Prior to radiomics analysis, preprocessing steps need to be applied to the images, which aim at reducing image noise, enhancing image quality, enabling the reproducible and comparable radiomic analysis. For some imaging modalities, such as PET, the images should be converted to a more meaningful representation (standardized uptake value, SUV). Image smoothing can be achieved by average or Gaussian filters. Voxel size resampling is important for datasets that have variable voxel size. Specifically, isotropic voxel size is required for some texture feature extraction. There are two main categories of interpolation algorithms: Polynomial and spline interpolation. Nearest neighbor is a zero-order polynomial method that assigns gray-level values of the nearest neighbor to the interpolated point. Bilinear or trilinear interpolation and bicubic or tricubic interpolation are often used for two-dimensional (2D) in-plane interpolation or 3D cases. Cubic spline and convolution interpolation are third order polynomial method that interpolates smoother surface than linear method, while being slower in implementation. Linear interpolation is a rather commonly used algorithm, since it neither leads to the rough blocking artifacts images that are generated by nearest neighbors, nor will it cause out-of-range gray levels that might be produced by higher order interpolation.

影像组学分析之前，需要对图像进行预处理，其目标是降低图像噪声，增强图像质量，使得影像组学分析可复制、可比较。对一些影像模态，如PET，图像应当转换为一种更有意义的表示（标准的吸收量，SUV）。图像平滑可以通过平均或高斯滤波器进行。对于有不同体素大小的数据集，体素重采样是非常重要的。具体的，需要各向同性的体素大小，来进行纹理特征提取。还有两个主要类别的插值算法：多项式插值和样条插值。最近邻是一种零阶多项式方法，将最近邻的灰度值指定给插值的点。双线性或三线性插值，和双三次或三三次插值，通常用于2D平面内插值，或3D的情况。三次样条和卷积插值是三次多项式方法，比线性方法可以插值出更平滑的平面，但实现会更慢一些。线性插值在算法中更常用，因为它既不会带来粗糙的方块伪影图像（最近邻插值会生成这样的伪影），也不会导致超出范围的灰度值（可能会由更高阶的插值生成）。

In the context of feature-based radiomics analysis, as discussed below, the computation of textures would require discretization of the gray levels (intensity values). There are two ways to do the discretization: fixed bin number N and fixed bin width B. For fixed bin number, we first decide a fixed number of N bins, and the gray levels will be discretized into these bins using the formula below:

在基于特征的影像组学分析的上下文中，如下所述，纹理的计算需要灰度级的离散化。有两种方法进行离散化：固定bin数量N和固定bin宽度B。对于固定的bin数量，我们首先确定固定的N个bin数量，灰度级会离散到这些bin中，使用下面的方式：

$$X_{d,k} = \left\{ \begin{matrix} [N_g \frac{X_{gl,k}-X{gl,min}} {X_{gl,max}-X{gl,min}}] + 1 & X_{gl,k}<X_{gl,max} \\ N_g & X_{gl,k} = X_{gl,max} \end{matrix} \right.$$(1)

where $X_{gl,k}$ is the intensity of k-th voxel. 其中$X_{gl,k}$是第k个体素的灰度。

For fixed bin width, starting at a minimum $X_{gl,min}$, a new bin will be assigned for every intensity interval of $w_b$. Discretized gray levels are calculated as follow:

对于固定的bin宽度，从最小值$X_{gl,min}$开始，每隔灰度间隔$w_b$就指定一个新的bin。离散化的灰度级计算如下：

$$X_{d,k} = [\frac {X_{gl,k}- X_{gl,min}} {w_b}]+1$$(2)

The fixed bin number method is better when the modality used is not well calibrated. It maintains the contrast and makes the images of different patients comparable, but loses the relationship between image intensity, while fixed bin size method keeps the direct relationship with the original scale. Some investigations about the effect of both methods have shown that fixed bin size method offered better repeatability and thus may be suitable for intra- and inter-patient studies, however, this remains a subject of ongoing research. In CT radiomics the image pixel intensity maps to the Hounsfield Units (HU) and thus is much more directly comparable and interpretable. MRI-related modalities are more challenging since the pixel intensities are not directly interpretable, rather need to normalized relative to some standard reference (e.g., contralateral brain, or normal appearing white matter in neuroimaging, psoas muscle in abdominal imaging, etc.).

固定bin数量的方法，在使用的模态没有进行很好的校准的时候，效果更好。其维护的是对比度，使得不同病人的图像可比，但损失了图像灰度之间的关系，而固定bin大小的方法保持了原始大小的直接关系。一些有关两种方法效果的研究表明固定bin大小的方法会得到更好的重复性，因此可能适用于患者内和患者间的研究，但是，这仍然是一个正在进行中的研究。在CT影像组学中，图像像素灰度映射的是HU值，因此更加直接可比和可解释。MRI相关的模态更加有挑战性，因为像素灰度不是直接可解释的，而是需要相对一些标准参考来进行归一化（如，对侧脑，或神经影像中正常出现的白质，腹部成像中腰肌，等）。

### 3.2 Machine and deep learning algorithms for radiomics

Machine and deep learning algorithms provide powerful modeling tools to mine the huge amount of image data available, reveal underlying complex biological mechanisms, and make personalized precision cancer diagnosis and treatment planning possible. Hereafter, two main types — feature-engineered (conventional radiomics) and nonengineered (deep learning based) radiomics modeling methods — will be briefly introduced. Generally speaking, machine learning methods can also be divided into supervised, unsupervised and semisupervised for both feature-based and featureless methods. Each of these categories will be briefly discussed in the following sections. A workflow diagram illustrating the radiomics analysis process after image acquisition is shown in Fig. 1.

机器学习和深度学习算法，为挖掘巨量的影像数据，提供了强力的工具，揭示了潜在的复杂生物学机制，使得个性化精度的癌症诊断和治疗计划成为可能。此后，两种主要类型的影像组学建模方法，特征工程的（传统影像组学）和非工程的（基于深度学习的），进行了简要介绍。一般来说，机器学习方法也可以分为监督的、无监督的和半监督的，这对于基于特征的和无特征的方法都可以进行这样分类。后面每个种类都会简要进行讨论。图像获取后，影像组学分析的工作流程图如图1所示。

#### 3.1.1. Feature-engineered radiomics methods

Traditionally, the radiomic features being extracted are hand-crafted features that capture characteristic patterns in the imaging data, including shape-based, first-, second-, and higher order statistical determinants and model-based (e.g., fractal) features. Feature-based methods require a segmentation of the region of interest (ROI), either through a manual, semiautomated, or automatic methods. Shape-based features are external representations of a region that characterize the shape, size, and surface information of the ROIs. Typical metrics include sphericity, and compactness. First-order features (e.g., mean, median) describe the overall intensity and variation of the ROIs, while ignoring spatial relations. Second-order (texture) features in contrast can provide inter-relationships among voxels. Textural features can be extracted from different matrices, for example, gray-level co-occurrence matrix (GLCM), gray-level run-length matrix (GLRLM), etc. Semantic features are another type of feature that can be extracted from medical images. These features describe qualitative features of the image typically used in the radiology workflow.

传统上，提取的影像组学特征是手工设计的特征，从影像数据中捕获特征模式，包括基于形状的，一阶，二阶和更高阶的统计行列式，和基于模型的（如，分形的）特征。基于特征的方法，需要分割ROI，要么通过手动分割，要么是半自动或自动的方法。基于形状的特征，是一个区域的外部表示，描述的是ROIs的形状、大小和平面信息。典型的度量包括，圆形度，和紧凑度。一阶特征（如，均值，中值）描述的是总体ROIs的灰度和变化，而忽略了空间关联。二阶（纹理）特征，提供的是体素之间的内部关系。纹理特征可以通过不同的矩阵来提取，如灰度共生矩阵(GLCM)，灰度行程矩阵(GLRLM)等。语义特征是另一种特征，可以通过医学图像提取出。这些特征描述的是图像的定量特征，是放射学工作流中的使用的典型特征。

Hundreds or even thousands of radiomic features are not uncommon when we deal with outcome modeling. Feature selection and/or extraction thus is a crucial step that aims at obtaining the optimal feature subset or feature representation that correlates most with the endpoint and meanwhile correlates least between each other. After the feature subset is obtained, various machine learning algorithms can be applied based on them. Fourteen feature selection and 12 classification methods were evaluated in terms of their predictive performance on two independent lung cancer cohorts. Sometimes, the feature selection and model construction can be implemented together, called the embedded method, such as least absolute shrinkage and selection operator (LASSO). In contrast, wrapper methods select the features based on the models’ performance for different subsets of features, for which we need to rebuild the model again after features are selected, for instance, recursive feature elimination support vector machines (SVM-RFE). Filter method also separates the feature selection and model construction processes, whose uniqueness of it is its independence of the classifier being used for the subsequent model building, such as Pearson correlation-based feature ranking. In any feature selection method, it is essential to ensure that there is no “double dipping” into the training data for both feature selection, hyper-parameter optimization, and model selection. Rather the methods of “nested cross validation” should be used in order to prevent overfitting or incorrect estimates of generalization. According to whether or not the labels (ground truths) are used, feature selection and extraction can be divided into supervised, unsupervised and semisupervised ways. The three feature selection methods discussed above are mostly supervised. Examples of unsupervised methods are principle component analysis (PCA), clustering and t-distributed stochastic neighbor embedding (t-SNE). PCA uses an orthogonal linear transformation to convert the data into a new coordinate system so that large variances are projected to orthogonal coordinates. Clustering is another feature extraction algorithm which aims at finding relevant features and combining them by their cluster centroids based on some similarity measure, such as K-means and hierarchical clustering. Unsupervised consensus clustering identified robust imaging subtypes using dynamic CE-MRI data for patients with breast cancer. t-distributed stochastic neighbour embedding is a dimension reduction method capable of retaining the local structure (pairwise similarity) of data, while revealing some important global structure.

当我们要处理的是输出的模型时，数百个甚至数千个影像组学特征，这是很平常的事。特征选择和/或提取，因此是一个关键的步骤，其目标是得到最优的特征子集，或特征表示，与终点的相关性最强，同时相互之间相关性最低。在得到了特征子集后，各种机器学习算法都可以基于其进行应用。在2个独立的肺癌人群中，评估了14种特征选择方法，和12种分类方法，评估了其预测性能。有时，特征选择和模型构建可以一起实现，称为嵌入方法，比如LASSO。比较起来，包装器方法基于模型对不同特征子集的性能进行特征选择，在特征选择之后，还需要重新构建模型，比如，迭代特征消除的支持矢量机(SVM-RFE)。滤波器模型也将特征选择和模型构建过程分隔开来，其唯一性体现在对于分类器用于后续模型构建的独立性，比如基于相关的Pearson特征排序。在任何特征选择方法中，最必须的是确保训练数据对于特征选择、超参数优化和模型选择没有double dipping。应当使用嵌套交叉验证方法，以防止过拟合，或对泛化的错误估计。根据是否使用标签，特征选择和提取可以分为监督的，无监督的和半监督的。上述三种特征选择方法基本都是有监督的。无监督方法的例子，有PCA，聚类和t-分布随机邻域嵌套(t-SNE)。PCA使用一种正交线性变换，来将数据转换成一种新的坐标系，这样大的方差投影到了正交的坐标系中。聚类是另一种特征提取算法，其目标是找到相关的特征，根据其聚类重心（基于一些相似度度量）将其结合到一起，比如K-均值和层次化聚类。无监督的共识聚类，使用动态CE-MRI数据，对乳腺癌病人，识别稳健的影像子类型。t-分布SNE是一种降维方法，可以保持数据的局部结构（成对的相似度），从而揭示一些重要的全局结构。

In the medical field, two types of questions are mainly investigated, binary problems (classification), such as whether or not a disease has recurred, the patient is alive beyond certain time threshold, etc; and survival analysis, that is able to show if a risk factor or treatment affects time to event. For the classification problem logistic regression fits the coefficients of the variables to predict a logit transformation of the probability of the presence of the event. SVM, frequently used in Computed Aided Diagnosis (CAD) and radiomics, learns an optimal hyperplane that separates the classes as wide as possible, while trying to balance with misclassified cases. SVM can also perform non-linear classification using the “kernel trick” — different basis functions (e.g., radial basis function), mapping to higher dimensional feature space. The hyperplane maximizes the margin between the two classes in a nonlinear feature space. SVM also tolerates some points on the wrong side of the boundary, thus improving model robustness and generalization. RF is based on decision trees, a popular concept in machine learning especially in the field of medicine, because their representation of hypotheses as sequential “if then” resembles human reasoning. RF applis bootstrap aggregating to decision trees and improve the performance by lowering the high variance of the trees. Risk assessment models (classification and survival) were constructed via RFs and imbalance adjustment strategies for locoregional recurrences and distant metastases in head and neck cancer.

在医学领域，主要研究两种类型的问题，二值问题（分类），如，一种疾病是否复发，病人的特定时间阈值之后仍然是活着的，等等；以及生存分析，这可以说明，一种风险因素或治疗方法影响了特定事件的时间。对于分类问题，逻辑回归拟合变量系数，预测事件发生概率的logit变换。SVM，在CAD和影像组学中频繁使用，学习了一个最优超平面，将各个类别分隔的尽可能宽，而试图与误分类的得到平衡。SVM也可以进行非线性分类，这需要使用核的技巧，即不同的基函数（如，径向基函数），映射到更高维度的特征空间。超平面在非线性特征空间中将两类之间的margin最大化。SVM还可以容忍边界错误一边的一些点，因此可以改进模型的稳健性和泛化性。RF是基于决策树的，这是机器学习的一个流行概念，尤其在医学领域是这样，因为这种将假设表示成if then的序列，与人类思考很相似。RF将bootstrp聚积应用到决策树中，通过降低树的高方差，来改进性能。通过RFs和不平衡调整策略来构建风险评估模型（分类和存活率），对于头颈部肿瘤的局部复发和远端转移瘤。

Neural networks, though usually used in the featureless context, can also be used in conventional feature selection and modeling. These algorithms are mainly for supervised learning, while in particular in the medical field, there are a lot of data without labeling, in these cases, semisupervised learning can be applied to make use of the unlabeled data combined with the small amount of labeled data. The self-training is bootstrapped with additional labeled data obtained from its predictions. The transductive SVM (TSVM) tries to keep the unlabeled data as far away from the margin as possible. Graph-based methods construct a graph connecting similar observations and enable the class information being transported through the graph.

神经网络，虽然经常使用在无特征的环境中，也可以用在传统的特征选择和建模中。这些算法主要是用于有监督学习的，特别是在医学领域，有很多没有标注的数据，在这种情况中，半监督的学习可以用于使用无标记数据和少量的标注数据。自训练是与从预测到的额外的标注数据进行bootstrapped的。传导SVM试图保持无标签数据尽量远离margin。基于图的方法构建一个图，将类似的观察连接起来，使类别信息可以在图中进行传导。

For the survival analysis, Cox regression, random survival forests, and support vector survival methods are also available to investigate the presence of a set of variables that may affect survival time. Due to the length limit, we will not go into the details. Interested readers can refer to the references to read more about these algorithms.

对于生存分析，可以使用Cox回归，随机生存森林和支持矢量生存方法，来研究可以影像生存时间的变量集合的存在性。由于长度限制，我们不会详述细节。感兴趣的读者可以参考相关文献，来阅读这些算法的细节。

#### 3.2.2. Non feature-engineered radiomics methods

Although hand-crafted features introduced above provide prior knowledge, they also suffer from the tedious designing process and may not faithfully capture the underlying imaging information. Alternatively, with the development of deep learning technologies based on multilayer neural networks, especially the convolutional neural networks (CNN), the extraction of machine learnt features is becoming widely applicable recently. In deep learning, the processes of data representation and prediction (e.g., classification or regression) are performed jointly. In such a case, multistack neural layers of varying modules (e.g., convolution or pooling) with linear/nonlinear activation functions perform the task of learning the representations of data with multiple levels of abstraction and subsequent fully connected layers are tasked with classification, for instance. A typical scenario to get such features is to use the data representation CNN layers as feature extractor. Each hidden layer module within the network transforms the representation at one level. For example, the first level may represent edges in an image oriented in a particular direction, the second may detect motifs in the observed edges, the third could recognize objects from ensembles of motifs. Patch-/pixel-based machine learning (PML) methods use pixel/voxel values in images directly instead of features calculated from segmented objects as in other approaches. Thus PML removes the need for segmentation, one of the major sources of variability of radiomic features. Moreover, the data representation removes the feature selection portion eliminating associated statistical bias in the process. For the CNN network, either self-designed (from scratch) or existing structures, for example, VGG, Resnet, can be used. Depending on the data size, we can choose to fix the parameters or fine-tune the network using our data, also called transfer learning. Instead of using deep networks as feature extractors, we can use them directly for the whole modeling process. Similarly to the conventional machine learning methods, there are also supervised, unsupervised, and semi-supervised methods. CNN are similar to regular neural networks, but the architecture is modified to fit to the specific input of large-scale images. Inspired by the Hubel and Wiesel’s work on the animal visual cortex, local filters are used to slide over the input space in CNNs, which not only exploit the strong local correlation in natural images but also reduce the number of weights significantly by sharing weights for each filter. Recurrent neural networks (RNN) can use their internal memory to process sequence inputs and take the previous output as inputs. There are two popular types of RNN — Long short-term memory (LSTM) and Gated recurrent units (GRU). They were invented to solve the problem of vanishing gradient for long sequences by internal gates that are able to learn which data in the sequence is important to keep or discard. Deep autoencoders (AE), which are unsupervised learning algorithms, have been applied to medical imaging for latent representative feature extraction. There are variations to the AEs, such as variational autoencoders that resemble the original AE and variational Bayesian methods to learn a probability distribution that represents the data, convolutional autoencoders that preserve spatial locality, etc. Another unsupervised method is the restricted Boltzmann machine (RBM), which is consists of visible and hidden layers. The forward pass learns the probability of activations given the inputs, while the backward pass tries to estimate the probability of inputs given activations. Thus, the RBMs lead to the joint probability distribution of inputs and activations. Deep belief networks can be regarded as a stack of RBMs, where each RBM communicates with previous and subsequent layers. RBMs are quite similar with AEs, however, instead of using deterministic units, like RELU, RBMs use stochastic units with certain distribution. As mentioned above, labeled data are limited, especially in the medical field. Neural network based semisupervised approaches combine unsupervised and supervised learning by training the supervised network with an additional loss component from the unsupervised generative models (e.g., AEs, RBMs).

虽然上述手工设计的特征提供了先验知识，它们的设计过程非常繁琐，可能不会忠实的捕获到潜在的成像信息。此外，随着基于多层神经网络的深度学习技术的发展，尤其是卷积神经网络(CNN)，提取机器学习的特征，最近正变得在很广的范围内越来越可用。在深度学习中，数据表示和预测的过程（如，分类或回归）是同时进行的。在这样一种情况中，不同模块（如，卷积或池化）的多层神经网络，使用的是线性/非线性激活函数，进行的任务是学习数据的表示，得到多个层次的抽象，最后用全连接层进行一些任务，比如分类。一个典型的获得这种特征的场景是，使用数据表示的CNN层作为特征提取器。网络中每个隐含层模块，在一个层次上对表示进行变换。比如，第一级可能表示有着特定朝向的边缘，第二级可能会检测到在观察到的边缘中的一些图案，第三级可能会识别到图案组合中的一些目标。基于图像块/像素的机器学习(PML)方法使用图像中的像素/体素值，而不是其他方法中，从分割出来的目标中计算出来的特征。因此PML不需要进行分割，而分割是影像组学特征的变化的主要源泉。而且，数据表示去除了特征选择部分，消除了这个过程中相关的统计偏差。对于CNN网络，可以使用自己定义的（从头）或现有的结构，如VGG，ResNet等。依赖于数据规模的不同，我们可以选择来固定参数或使用我们的数据精调网络，这也称为迁移学习。如果不使用深度网络作为特征提取器，我们也可以将其用在整个建模过程中。与传统机器学习过程类似，这其中也有监督的、无监督的和半监督的方法。CNNs与常规神经网络类似，但其架构经过修改，与大规模图像的特定输入进行了适配。受到Hubel和Wiesel等在动物视觉皮层的工作的启发，使用了局部滤波器在CNNs的输入空间上进行滑动，这不仅利用了自然图像中很强的局部相关性，也通过在各滤波器中共享权重，从而显著减少了权重的数量。RNN可以使用其内部存储，处理序列输入，将之前的输出作为输入进行处理。有两种流行的RNN类型，长短期记忆(LSTM)和门控循环单元(GRU)。其发明是为了解决长序列的消失梯度的问题，通过内部的门控，可以学习序列中的哪些数据是重要的，需要保留或丢弃。深度自编码器(AE)，这是无监督学习的算法，已经用于处理医学影像，学习潜在的特征提取的表示。也有AEs的变化，比如变分自编码器，与原始AE和变分贝叶斯方法相似，可以学习一个概率分布，对数据进行表示，卷积自编码器可以保持空间定位性等。另一种无监督的方法是，有限玻尔兹曼机(RBM)，这包含了可见层和隐含层。前向过程学习了激活概率给定了输入，而反向过程试图估计输入的概率给定了激活。因此，RBMs会得到输入和激活的联合概率分布。深度置信网络可以认为是RBMs的堆叠，其中每个RBM与之前的和之后的层进行通信。RBMs与AEs非常类似，但是，RBMs没有使用确定的单元，如ReLU，而使用的是随机单元，有一定的分布。如上所述，标注的数据是有限的，尤其是在医学领域。基于神经网络的半监督方法，将无监督和有监督学习结合到一起，训练有监督的网络，同时还有一个额外的损失单元，是从无监督的生成式模型中得到的（如，AEs，RBMs）。

Machine learning methods are highly effective with large number of samples; however, they suffer from overfitting pitfalls with limited training samples. For deep learning, data augmentation (e.g., by affine transformation of the images) during training is commonly implemented. Transfer learning is another way to reduce the difficulty in training. Using deep models trained on other dataset (natural images) and then fine-tune on the target dataset. The structures of the networks can also be modified to reduce overfitting, such as by adding dropout and batch normalization layers. Dropout randomly deactivates a fraction of the units during training and can be viewed as a regularization technique that adds noise to the hidden units. Batch normalization reduces the internal covariate shift by normalizing for each training mini-batch.

机器学习方法是在样本数量巨大时，效率很高的；但是，在有限的训练样本时，会有过拟合的陷阱。对于深度学习，通常使用在训练时的数据扩增（如，使用图像的仿射变换）。迁移学习是降低训练中难度的另一种方法。使用在其他数据集（自然图像）中训练得到的深度模型，然后在目标数据集中进行精调。网络的结构可以进行修改，以降低过拟合的概率，比如增加dropout和BN层。Dropout在训练时使随机的一部分单元处于不激活状态，可以视为一种正则化方法，对隐含层增加了一部分噪声。BN降低了内部的协方差变化，对每个训练的mini-batch进行归一化。

Comparing with feature-based methods, deep learning methods are more flexible and can be used with some modifications in various tasks. In addition to classification, segmentation, registration, and lesion detection are widely explored by deep learning techniques. Fully CNN (FCN), trained end-to-end, merge features learnt from different stages in the encoders and then upsampling low-resolution feature maps by deconvolutions. U-Net, built upon FCN, with the pooling layers being replaced by upsampling layers, resulted in a nearly symmetric U-shaped network. Skipping structures combines the context information with the unsampled feature maps to achieve higher resolution. CNN, trained end-to-end from clinical images were directly used for binary classification of skin cancer and achieved performance on par with experts. Chang et al. proposed a multiscale convolutional sparse coding method that provides an unsupervised solution for learning transferable base knowledge and fine-tuning it towards target tasks.

与基于特征的方法相比，深度学习方法更加灵活，经过一定修改可以用在很多任务中。除了分类，深度学习方法也广泛的用于分割、配准和病变检测。全卷积网络(FCN)，经过端到端的训练，将编码器中不同阶段的学习到的特征融合到一起，然后将低分辨率特征图通过解卷积进行上采样。U—Net是在FCN之上构建的，其pooling层替换成了上采样层，得到了近似对称的U形的网络。跳跃连接将上下文信息与未采样的特征图连接到了一起，以得到更高的分辨率。从临床影像中进行了端到端的训练的CNN，直接用于皮肤癌的二值分类，得到了与专家类似的性能。Chang等提出了一种多尺度的卷积稀疏编码方法，将一种无监督的方案学习可迁移的基础知识，然后到目标任务中进行精调。

### 3.3 Validation and benchmarking of radiomics models

Once models are developed using the selected predictors, quantifying the predictive ability of the models (validation) is necessary. Based on the TRIPOD criteria, there are four types of validation: (1a) developing and validating on the same data, which gives apparent performance. This evaluation is usually optimistic estimation of the true performance. (1b) Developing the models using all the data, then using resampling techniques to evaluate the performance. (2a) Randomly split the data into two groups for development and validation separately. (2b) Split the data nonrandomly (e.g., by location or time), which is stronger than (2a), (3), and (4). Develop the model using one data set and validate on separate data. It is ideal if there is a separate data set for external validation, however, in the frequent case that only a single data set is available, internal validation (1b) is required. Two popular resampling methods are bootstrapping and cross-validation. Feature selection, which is required before machine learning, should precede cross-validation, or it will lead to a selection bias due to the leak of information by the prefiltering of the features.

一旦使用选择的预测器开发出了模型，量化模型的预测能力（验证）就是必须的了。基于TRIPOD规则，有四种类型的验证：(1a)在相同的数据上进行开发和验证，这会给出明显的性能；这种评估通常是真实性能的最优估计；(1b)使用所有数据开发模型，然后使用重采样技术来评估性能。(2a)将数据随机分成两组，分别进行开发和验证。(2b)将数据非随机的（如，根据位置或时间）进行分割，这比(2a)(3)(4)的条件都要强。使用一个数据集来开发模型，然后在另外的数据中验证模型。如果另有一个数据集进行外部验证，这是很理想的状态，但是，在更多的情况中，只有一个数据集可用，这就需要用(1b)进行内部验证。两种流行的重采样方法是bootstrapping和交叉验证。机器学习之前需要特征选择，应当在交叉验证之前，不然的话，会通过特征的预滤波，由于信息泄漏带来选择偏差。

Radiomic classifiers output a score that indicates the likelihood of one event to happen, and a threshold, to generate positive or negative predictions according to the task at hand. For example, fewer false positives would be required if we are implementing a conservative experiment, thus larger threshold will be preferred. Classifiers are evaluated using either a numeric metric (e.g., accuracy), or the so-called confusion matrix, or a graphical representation of performance, such as a receiver operating characteristic curve (ROC), a 2D graph with true positive rate being the Y axis, and false positive rate the X axis. It has the advantage that they show classifier performance without regard to threshold and class distribution, thus widely used in model evaluation. The area under an ROC curve (AUC) is more convenient when comparing, and is equivalent to the probability that the classifier will rank a randomly chosen positive instance higher than a randomly chosen negative instance. For survival analysis, Harrell’s C index is commonly used to measure discrimination ability of the model, which is motivated by Kendall’s tau correlation. Harrell defines the overall C index as the proportion of all usable pairs in which the predicted risk probabilities and outcomes are concordant (Usable pairs are two cases that at least one of them is event).

影像组学分类器，输出的是一个分数，表明一件事会发生的概率，输出的还有一个阈值，根据要处理的任务，来生成正的和负的预测。比如，如果我们要进行一个保守的试验，那么就需要更少的假阳性，因此需要更大的阈值。分类器的评估，使用的要么是一个数值度量（如，准确率），或所谓的混淆矩阵，或者性能的图形化表示，比如一个ROC曲线，这是一个2D图，真阳性率为Y轴，假阳性率为X轴。其优势为，不需要针对阈值，或类别分布，给出分类器的性能，因此在模型验证时广泛使用。在ROC曲线下的面积(AUC)在比较时更方便，而且与分类器对一个随机选择的正样本的评分比一个随机选择的负样本的评分要高的概率一样。对于生存分析，Harrell的C index通常用于度量模型的区分能力，这是受Kendall的tau相关推动所做的。Harrell将总体的C index定义为所有可用对的比例，其中预测的风险概率和输出是一致的（可用的对，是两个案例，其中至少一个是事件）。

Kaplan–Meier (KM) curves are used to estimate the survival function from lifetime data, and also used to compare different risk groups. The risk groups can be patients that are treated with certain plan and the control group, or they can be the outputs from a survival model (e.g., Cox model) that divides the patients into high- and low-risk groups. It is highly recommended to visualize confidence intervals of the curves. The log rank test gives a quantitative evaluation of the statistical significance of the difference for different curves, which is also widely provided for KM curves.

Kaplan–Meier曲线用于从很长时间的数据中估计生存函数，也用于比较不同的风险组。风险组可以是用特定方案进行治疗的病人，和控制组，或他们可以是一个生存模型的输出（如，Cox模型），将病人分成高风险和低风险组。非常推荐将曲线的置信度间隔进行可视化。记录排名测试，给出了不同曲线差异的统计显著性的定量评估，这在KM曲线也得到了广泛使用。

## 4. Implementation in Medical Physics Practice

### 4.1. Software tools for radiomics

In most published research studies in radiomics, in-house developed methods are used. However, some research groups developed image analysis/radiomic software tools, both commercial and open source, available to the scientific community. The main goals of these tools are: (a) to speed up the development of competences based on more recent skills on radiomics; (b) to allow reproducibility and comparability of results from different research groups, and (c) to standardize both feature definitions and computation methods to guarantee the reliability of radiomic results.

在影像组学多数发表的研究中，都使用了内部开发的方法。但是，一些研究小组开发了图像分析/影像组学软件工具，商业软件和开源的都有，科研团体是可用的。这些工具的主要目的是：(a)加速影像组学最近的进展的开发；(b)使不同研究小组的结果的可复制性和可比较性成为可能；(c)使特征定义和计算方法标准化，确保影像组学的结果的可靠性。

Table I shows a list of the software, web platforms, and toolkits available free of charge for the extraction of radiomics features, along with some of their main functionalities and relevant information. Given the high pace of radiomic developments, the list is not exhaustive and does not intend to cover all possible solutions. Furthermore, considering recent and increased interest in the radiomic field, many other dedicated tools are under development. All the open-source solutions shown in this overview have been implemented by research teams (MaZda, LifeX, ePAD, HeterogeneityCAD, PyRadiomics/Radiomics, QuantImage, the Texture Analysis Toolbox, QIFE, IBEX, and MedomicsLab) and are capable of analyzing CT, MRI, and PET, some of them can process also other medical images, such as mammography, radiography, or ultrasound.

表1给出了一系列可用的软件、网站平台和工具集，可以免费提取影像组学特征，表中还包括了其主要功能和相关的信息。由于影像组学发展的节奏很快，这个列表并没有涵盖全部，也没有试图覆盖所有可能的解决方案。而且，考虑到最近在影像组学领域的兴趣增加，很多其他的工具也在开发之中。本文中列举的所有开源的解决方案都是由研究小组实现的(MaZda, LifeX, ePAD, HeterogeneityCAD, PyRadiomics/Radiomics, QuantImage, the Texture Analysis Toolbox, QIFE, IBEX, and MedomicsLab)，可以分析CT，MRI和PET影像，其中一些也可以处理其他医学影像，如乳腺成像，放射成像或超声。

Four software programs (MaZda, LifeX, ePAD, IBEX) offer the possibility of manually or automatically segmenting medical images. Three toolkits (HeterogeneityCAD, PyRadiomics/Radiomics, QIFE) are designed exclusively for the extraction of features. They can be embedded in more complete solutions (e.g., 3D Slicer). Morphological, first, second, and third order statistical features can be extracted by all software solutions, except for ePAD. Four of them (TexRAD, MaZda, PyRadiomics/Radiomics, IBEX) offer also the possibility of extracting features from filtered images. Of note, MEDomicsLab is an open-source software currently being developed by a consortium of research institutions, which will be available in the second half of 2019.

四个软件程序(MaZda, LifeX, ePAD, IBEX)给出了手动或自动分割医学影像的可能性。三个工具集(HeterogeneityCAD, PyRadiomics/Radiomics, QIFE)设计只用于提取特征。它们可以嵌入到更完整的解决方案中（如，3D Slicer）。所有软件都可以提取形态学特征，一阶，二阶和三阶统计特征，除了ePAD不可以。四种(TexRAD, MaZda, PyRadiomics/Radiomics, IBEX)也给出了从滤波后的图像中提取特征的可能性。要说明的是，MEDomicsLab是一个开源的软件，目前由一个研究机构联合体进行开发，在2019年下半年就可以使用了。

### 4.2. Commercial programs for radiomics

Commercial software programs are also becoming increasingly available due to the interest of many medical device incumbents as well as newcomers such as commercial spin-off of research groups or de novo start-up companies. Such software programs can be divided into:

## 5. Research Platforms

Research platforms enable the discovery of new signatures by linking quantitative imaging biomarkers, clinical and omics data to clinical endpoints. They are usually considered nonmedical devices in that they do not affect the clinical routine, run usually on independent workstations, and are not used to drive clinical decisions. Their main differentiator from open access software consists of workflow optimization and efficiency improvements, enabling an automatic, end-to-end seamless processing pipeline. TexRad, QIDS, RadiomiX, iBiopsy, and EVIDENS offer research capabilities at a different level, ranging from simple features extraction to image filter application and machine learning modules. In the research mode, these software programs are usually open to process any 3D image, DICOM or not, up to 2D digital pathology images (histomics or pathomics).

研究平台通过将定量的影像生物标记、临床的和组学数据与临床终点连接到一起，可能发现新的标签。他们通常被认为是非医学设备，因为他们没有影像临床过程，通常在独立的工作站上运行，通常也不用于得到临床决策。其与可以公开访问的软件的主要的区分点包括，工作流的优化和效率的改进，可以自动的、端到端无缝的处理。TexRad, QIDS, RadiomiX, iBiopsy和EVIDENS在一定程度上有研究能力，从简单的特征提取到图像滤波应用，和机器学习模块。在研究模式下，这些软件程序通常可以处理任意3D影像，DICOM或非DICOM都可以，和2D数字病理学图像。

### 5.1 Clinically validated software programs 临床验证的软件程序

In order to use decision support systems (DSSs), based on an already discovered signatures and thoroughly validated on large independent datasets, also known as clinical grade DSS, in clinical practice, a regulatory clearance is usually needed, as they fall within the definition of medical devices in many regulatory systems, for example, class I or II medical device as a function of their intended use (e.g., mere support to decision vs a computer-aided diagnosis/prognosis). DSSs are usually limited to a specific modality, mostly CT, and to a specific disease in a specific body district: these constraints come primarily from the intended use definition to which these DSSs are subjected to be compliantly marketed.

为使用决策支持系统(DSSs)，基于已经发现的标签，在大型独立的数据集上进行了彻底验证，也就是临床评级的DSS，在临床实践中，通常需要监管许可，因为在很多监管系统中，它们在医疗设备的定义中，比如，I类或II类医疗设备（如，只支持决策，或是一个计算机辅助的诊断/预后系统）。DSSs通常受限于特定模态，主要是CT，也受限于特定的身体区域内的疾病：这些约束主要从其目标使用定义中得到。

Research tools or clinical grade DSSs can be embedded into more comprehensive platforms such as Picture Archive and Communication Systems (PACS), Hospital Information Systems (HIS), Oncology Information Systems (OIS) or Treatment Planning Systems (TPS), or being stand-alone. Usually, large medical device incumbents tend to embed DSSs into their research or clinical solutions, while newcomers often offer their solution as a standalone system.

研究工具或临床评级的DSSs可以嵌入到更综合的平台中，如PACS，HIS，OIS或TPS中，或单独使用。通常，大型医学设备的责任人希望将DSSs嵌入到其研究或临床解决方案中，而新来的通常作为单独系统。

It is not unusual that large medical device players embed open access or commercial software programs to provide their customers with the possibility of exploring or exploiting radiomic potential: examples are IntelliSPace Discovery (Philips, the Netherlands) which interfaces to Pyradiomics, Advantage Workstation (GE, Buc, France) which interfaces through a plugin to Quantib Brain or Syngo.via Frontier (Siemens, Erlangen, Germany) which interfaces to RadiomiX. It is also beneficial to mention the platform (www.envoyai.com) which offers the possibility of sharing applications and, once solutions reached the product maturity, to commercialize them.

大型医疗设备将开源的或商用软件嵌入其中，为其客户提供探索影像组学功能的可能性：这样的例子如，IntelliSPace Discovery有Pyradiomics的接口，Advantage Workstation通过插件接入到了Quantib Brain，Syngo.via Frontier有RadiomiX的接口。平台(www.en voyai.com)提供了分享应用的功能，一旦达到了产品成熟度，就会进行商用。

## 6. Current chanllenges and recommendations

### 6.1. Interpretability issues 可解释性问题

It is recognized that machine learning algorithms tend to generally trade interpretability for better prediction. Hence, clinicians are still reluctant to embrace these methods as part of their clinical practice, because they have long been perceived them as “black box”, meaning that it is difficult to determine how they arrive at their predictions. For example, it is difficult to understand deep neural networks due to the large number of interacting, nonlinear parts. In order to improve interpretability of radiomics for the clinician, methods based on graph approaches can be utilized, and in the context of deep learning better visualization tools are being developed such as maps highlighting regions of the tumor that impact the prediction of the deep learning classifier are also being proposed.

一般都承认，机器学习算法可以在可解释性与更好的预测性能之间进行选择。因此，临床医生仍然不愿意将这些方法用于其临床实践，因为长期以来被认为是黑盒，即很难解释怎样得到这些预测的。比如，很难理解深度神经网络，由于有大量交互的非线性的部分。为提高影像组学对医生的可解释性，利用了基于图的方法，在深度学习的领域，开发了更好的可视化工具，比如高亮肿瘤区域的图，深度学习分类器预测的影响。

### 6.2. Repeatability and reproducibility issues

In radiomics, repeatability is measured by extraction of features from repeated acquisition of images under identical or near-identical conditions and acquisition parameters, whereas reproducibility or robustness, is assessed when measuring system or parameters differ. These can be assessed by use of digital or physical phantoms. Physical phantoms usually contain inserts of different with different density, shape, or texture properties in order to produce a wide range of radiomics feature values. These phantoms allow to assess the reproducibility or robustness of the entire workflow, from image acquisition to extraction of radiomic features. Their major drawback is that they do not reflect the variability of human anatomy in the clinical scenario.

在影像组学中，可重复性通过对重复采集的图像进行提取特征来衡量，采集的条件和参数是一致的，或接近一致的，而可复现性或稳健性，是在衡量系统或参数不一样的时候，进行评估的。这些可以通过使用数字或物理模体来进行评估。物理模体通常包含不同密度、形状或纹理性质的插入物，以形成很广范围的影像组学特征值。这些模体可以评估整个工作流程的可复现性或稳健性，从影像获取到影像组学特征提取。其主要缺点是，他们没有反应人体解剖结构在临床时的变化性。

A phantom for radiomics was created for use with CT or CBCT called Credence Cartridge Radiomics (CCR) Phantom. This consisted of ten cartridges with different density and texture properties in order to produce a wide range of radiomics feature values: wood, rubber, cork, acrylic, and plaster. Phantoms for PET with heterogeneous lesions have been also proposed, for example, with different 3D printed inserts reflecting different heterogeneities in FDG uptake.

创建了一个用于CT或CBCT的模体，称为CCR模体。这个模体包含10个芯，包含不同的密度和纹理性质，以产生很多影像组学特征值：木头，橡胶，软木，丙烯酸纤维，和石膏。也提出了用于PET的包含异质病症的模体，如，使用不同的3D打印的插入物，反应FDG使用中不同的异质性。

Digital phantoms are usually scans of patients acquired under controlled conditions. They are therefore realistic, but cannot be used for studying radiomic features’ sensitivity to the image acquisition and its parameters. A dataset consisting of 31 sets of repeated CT scans acquired approximately 15 min apart is now publicly accessible through The Reference Image Database to Evaluate Therapy Response (RIDER). This dataset allows “test-retest” analysis, a comparison of the results from images acquired within a short time on the same patient.

数字模体通常是在受控的环境中扫描的患者。因此它们是真实的，但无法用于研究影像组学特征对图像获取及其参数的敏感性。通过RIDER可以公开访问一个包含了31个重复扫描的CT的数据集。这个数据集可以进行测试-重测试分析，这是对在很短时间内对相同患者进行重复扫描的结果比较。

### 6.3. Factors affecting stability 影响稳定性的因素

For CT, inter-scanner variability of image features produces differences in extracted features that are comparable to the variability in patient images acquired by the same scanner.  The choice of methods of reconstruction, such as filtered back projection or iterative algorithm, also affect radiomic feature. Smoothing of the image and reducing the slice thicknesses can improve reproducibility of CT-extracted features. In PET imaging, textural features are sensitive to different acquisition modes, reconstruction algorithms, and their user-defined parameters such as the number of iterations, the postfiltering level, input data noise, matrix size, and discretization bin size.

对于CT，图像特征在不同扫描仪之间的变化，在提取的特征中会产生差异，这与在同一个扫描仪中获取的图像之间的差异是可比的。重建方法的选择，比如FBP或迭代算法，也会影响影像组学特征。影像的平滑和缩小层厚，可以改进CT提取的特征的可复现能力。在PET成像中，纹理特征对很多因素都敏感，包括不同的获取模式、重建算法及用户定义的参数，如迭代数量，后滤波水平，输入数据噪声，矩阵大小和离散bin的大小。

Radiomic features extracted from MRI scans depend on he field of view, field strength, reconstruction algorithm, and slice thickness. Results of the DCE-MRI depend on the contrast agent dose, method of administration, and the pulse sequence used. The radiomic features extracted from DW-MRI depend on acquisition parameters and conditions as k-space trajectory, gradient strengths and b-values. The repeatability of MR-based radiomic features has been investigated using a ground truth digital phantom of brain glioma patients and an MRI simulator capable of generating images according to different acquisition (field strength, pulse sequence, arrangement of field coils) and reconstruction methods. It was found that some features are subject to small changes, compared with clinical effect size.

从MRI scans中提取的影像组学特征，与FOV，场强，重建算法和层厚有关。DCE-MRI的结果与对比度代理的剂量，管理的方法，和使用的脉冲序列有关。从DW-MRI中提取的影像组学特征，与获取参数和条件有关，如k-空间轨迹，梯度强度和b值。基于MR的影像组学特征的可重复性已经进行了研究，使用的是脑部glioma患者的真值数字模体，和一个MRI模拟器，这个模拟器可以根据不同的获取条件（场强，脉冲序列，场线圈的排布）和重建算法生成影像。结果发现，与临床影响的大小相比，一些特征是会受到小的变化的影响的。

In presence of significant respiratory tumor motion as in the case of lung cancer, conventional PET images are influenced by motion as, because of their relatively long acquisition times, the counts measured are averaged over multiple breathing cycles. Respiratory-gated PET accounts for respiratory motion and textural features from gated PET have been found robust.

在有明显的呼吸运动时，如在肺癌中的肿瘤运动的情况，传统PET图像是受到运动的影响的，因为其获取时间较长，度量的计数是在多个呼吸周期中平均的。从门控的PET得到的，呼吸门控的PET计数，对呼吸运动和纹理特征是稳健的。

Segmentation affects the radiomics workflow, regardless of the imaging technique, because many extracted features depend on the segmented region. Semiautomatic segmentation algorithms may improve the stability of radiomic features, and recently available fully automatic segmentation tools may be as accurate as manual segmentation by medical experts.

分割影响着影像组学的工作流，无论什么成像技术，因为很多提取出的特征会依赖于分割出来的区域。半自动的分割算法会改进影像组学特征的稳定性，而且最近可用的全自动分割工具，可能与医学专家得到的手动分割一样准确。

The studies on the comparisons of the performance of many classifier and feature selection methods indicate that the choice of classification method is the most dominant source of models’ predictive performance variability. Fourteen feature selection algorithms were compared on a set of 464 lung cancer patients considering 440 radiomic variables. The feature selection method based on the Wilcoxon signed-rank (WLCX) test had the highest prognostic performance with high stability against data perturbation. Interestingly, WLCX is a simple univariate method based on ranks, which does not take into account the redundancy of selected features during feature ranking. In a comparison of performance of 24 feature selection methods for radiomic signature building for lung cancer histology it was shown that RELIEF with its variants were the best performing methods.

对很多分类器和特征选择方法的性能的比较的研究表明，分类方法的选择是模型预测性能变化的最主要的源泉。在464例肺癌患者的数据集中，对440个影像组学变量，比较了14种特征选择算法。基于Wilcoxon signed-rank(WLCX)测试的特征选择方法，其预后性能最高，而且对数据的扰动有非常高的稳定性。有趣的是，WLCX一个单变量方法，只基于排序，这在特征排序的过程中并没有考虑到选择的特征的冗余性。对肺癌histology的影像组学标签构建中，对24种特征选择方法进行了比较，结果表明RELIEF及其变体是性能最高的方法。

### 6.4. Quality, radiomics quality score

The workflow for radiomic studies involves several steps, from data acquisition, selection, and curation, to feature extraction, feature selection, and modeling. There is an important need that radiomics studies are properly designed and reported to ensure the field can continue to develop and produce clinically useful tools and techniques. A number of issues can arise providing misleading information, including imaging artifacts, poor study design, overfitting of data, and incomplete reporting of results. Although imaging artifacts are inevitable in medical imaging, consistent imaging parameters may help reduce variability in radiomic features. To minimize the potential of overfitting of radiomic models, ten patients are needed for each feature in the final model. Ideally, an independent external validation dataset is also used to confirm the prognostic ability of any radiomic model. The radiomics quality score (RQS) has recently been developed to assess all areas of a radiomic study and determine whether it is compliant with best practice procedures, emulated from the TRIPOD initiative previously described.

影像组学研究的工作流包含几个步骤，从数据获取，选择和管理，到特征提取，特征选择，和建模。影像组学的研究要进行合理的设计和报告，以确保这个领域可以继续开发生产出临床有用的工具和技术，这个需求很重要。会出现几种问题，产生误导性的信息，包括成像伪影，很差的研究设计，数据的过拟合，和不完整的结果的汇报。虽然成像伪影在医学影像中是不可避免的，但一致的成像参数会减少影像组学特征的变化。为最小化影像组学模型过拟合的可能性，最终模型的每个特征，都需要10个患者。理想情况下，一种独立的外部验证数据集也用于确认任何影像组学模型的预后能力。影像组学质量分数(RQS)最近提出用于评估所有领域的影像组学研究，确定是否与最佳实践过程相符合，这是由前述的TRIPOD倡议的。

### 6.5 Standardization and harmonization

Although research in the field of radiomics has drastically increased over the past several years, there still remains a lack of reproducibility and validation of current radiomic models. There are currently no guidelines and standard definitions for radiomic features and for constructing these features into clinical models. Current initiatives are underway to improve standardization and harmonization in radiomic studies.

虽然影像组学领域的研究在过去几年中急剧增长，但目前的影像组学模型仍然缺少可复现性和验证。对影像组学特征，和将这些特征构建成临床可用的模型，目前没有任何指南和标准定义。目前的倡议也正在形成中，以改进影像组学研究的标准化和一致化。

As a part of radiomic signature validation, there are efforts to explore distributed feature sharing and model development across contributing institutions. A key component in this exercise is the assessment and redressal of batch effects and confounding variables across contributing sites, so as to ameliorate systematic yet unmeasured sources of variation. Another key component is the use of methods to harmonize data as well as model parameters across study sites, with the intent of meaningful comparisons across clinical population. Such efforts are necessary to enable the widespread and generalizable development of models that are transportable across institutions. In addition to the careful calibration and stability analysis of radiomic features within predictive models, there is also a need for ensuring model robustness through approaches like noise injection. Adversarial training approaches from neural networks can have value in the modern deep learning modeling area by incorporating not only positive examples but negative ones too. The workflow for computing features is complex and involves many steps, often leading to incomplete reporting of methodological information (e.g., texture matrix design choices and gray-level discretization methods). As a consequence, few radiomics studies in the current literature can be reproduced from start to end.

作为影像组学标签验证的一部分，有探索分布式特征共享和在有贡献的机构中共同模型开发的工作。在这个实践中，最关键的部件是对批次努力的评估和重新平衡，和在有贡献的点中的令人困惑的变量，以改善系统的但未衡量的变化的源泉。另一种关键的组件，是使用方法来使数据一致，以及不同研究点的模型参数一致，其目的是在不同临床人群中进行有意义的比较。这种努力是必要的，可以使模型开发可以泛化，在不同机构之间可以迁移。除了对预测模型中的影像组学特征进行仔细的校准和稳定性分析，还需要确保模型对一些行为的稳健性，如噪声注入。从神经网络中得到的对抗训练方法，在现代深度学习建模领域也有价值，通过不仅使用正样本，也使用负样本。计算特征的工作流是复杂的，有很多步骤，通常会得到不完整的方法论信息的汇报（如，纹理矩阵设计的选择和灰度级离散化方法）。结果是，目前文献中极少有影像组学研究可以从头到尾的进行复现。

To accelerate the translation of radiomics methods to the clinical environment, the image biomarker standardization initiative (IBSI) has the goal to provide standard definitions and nomenclature for radiomic features, reporting guidelines, and to provide benchmark datasets and values to verify image processing and radiomic feature calculations. Figure 2 presents the standardized radiomics workflow defined by the IBSI. The IBSI aims at standardizing both the computation of features and the image processing steps required before feature extraction. For this purpose, a simple digital phantom was designed and used in Phase 1 of the IBSI to standardize the computation of 172 features from 11 categories. In Phase 2 of the IBSI, a set of CT images from a lung cancer patient was used to standardize radiomics image processing steps using five different combinations of parameters including volumetric approaches (2D vs 3D), image interpolation, re-segmentation and discretization methods. The initiative is now reaching completion and a consensus on image processing and computation of features has been reached over time.

为加速将影像组学方法应用到临床环境，影像生物标志标准化倡议(IBSI)的目标是为影像组学特征、汇报指南的定义和术语进行标准化，提供基准测试数据集和值，以验证影像处理和影像组学特征计算。图2给出了IBSI定义的标准化的影像组学工作流。IBSI的目的是将特征选择之前的特征计算和影像处理过程进行标准化。为了这个目的，设计了一种简单的数字模体，用于IBSI标准化的11类中的172个特征的计算的第一阶段。在IBSI的第二阶段，肺癌患者的CT影像的集合用于对影像组学影像处理步骤的标准化，使用了五种不同的参数组合，包括体的方法(2D vs 3D)，影像插值，重分割和离散方法。这个倡议目前已接近完成，经过很长时间已经在影像处理和特征计算中达成了一致。

Overall, the use of standardized computation methods would greatly enhance the reproducibility of radiomics studies, and it may also lead to standardized software solutions available to the community. It would also be desirable that the code of existing software be updated to conform with standards established by the IBSI. Furthermore, it is essential to include in radiomics studies the comprehensive description of feature computation details as defined by the IBSI and Vallieres et al, as shown in Table II. Ultimately, we envision the use of dedicated ontologies to improve the interoperability of radiomics analyses via consistent tagging of features, image processing parameters and filters. The Radiomics Ontology (www.bioportal.bioontology.org/ontologies/RO) could provide a standardized means of reporting radiomics data and methods, and would more concisely summarize the implementation details of a given radiomics workflow.

总体上，标准化的计算方法会极大的增强影像组学研究的可复现能力，也会带来标准化的软件。现有的软件的代码如果可以升级，以与IBSI确立的标准符合，那么也是很理想的。而且，影像组学研究中要包含IBSI和Vallieres等定义的特征计算细节的综合描述，也是非常关键的，如表2所示。最终，我们预见通过特征、影像处理参数和滤波器的一致标记，来改进影像组学分析的互操作性，是必然的。影像组学本体论给出了汇报影像组学数据和方法的标准化方法，而且会更简洁的总结给定影像组学工作流的细节。

Finally, some guiding principles already exist to help radiomics scientists further implement the responsible research paradigm into their current practice. A concise set of principles for better scientific data management and stewardship, the “FAIR guiding principles,” stating that all research objects should be findable, accessible, interoperable, and reusable. Implementation of the FAIR principles within the radiomics field could facilitate its faster clinical translation. First, all methodological details and clinical information must be clearly reported or described to facilitate reproducibility and comparison with other studies and meta-analyses. Second, models must be tested in sufficiently large patient datasets distinct from teaching (training and validation) sets to statistically demonstrate their efficacy over conventional models (e.g., existing biomarkers, tumor volume, cancer stage, etc.). To allow for optimal reproducibility potential and further independent testing, all data, final models and programming code related to a given study needs to be made available to the community. Table III provides guidelines that can help to evaluate the quality of radiomics studies. More guidelines on reproducible progostic modeling can also be found in the TRIPOD statement.

最终，已经存在一些指南规则，帮助影像组学科学家进一步在其目前的实践中实现负责的研究。更好的科研数据管理和组织，有一套简洁的规则，即FAIR指南规则，说明了所有研究目标应当是可发现，可访问，可交互和可复用的。FAIR原则在影像组学领域的实现，会促进向临床使用的更快转化。第一，所有的方法论上的细节和临床信息，需要得到清晰的汇报或描述，以促进可复现性，以及与其他研究和元分析的比较。第二，模型必须在足够大的患者数据集上进行测试，与训练和验证集还要有足够的区别，以在统计上证明比传统模型更有效（如，现有的生物标记，肿瘤体积，癌症分级，等）。为得到最优的可复现性，并进一步独立的进行测试，与给定研究相关的所有数据、最终模型和编程代码，需要对团体开源。表3给出了可以帮助评估影像组学研究的质量的指南。在可复现的预后建模中的更多的指南，可以在TRIPOD中找到。

## 7. Conclusions

The field of radiomics is constantly growing within the field of medical physics and is an exciting opportunity for the medical physics community to participate in novel research for the safe translation of quantitative imaging. Machine and deep learning-based models have the potential to provide clinicians with DSS to improve diagnosis, treatment selection, and response assessment in oncology. As the field expands, the need to associate radiomic features with other clinical and biological variables will become of increased importance. The field should also continue to strive for standardized data collection, evaluation criteria, and reporting guidelines in order to mature as a field. Data sharing will be crucial to develop the large-scale datasets needed for proper validation of radiomic models and there will be a need for collaborations to validate models across multiple institutions. In order to move radiomic models into the clinical practice it is imperative to demonstrate improvements to the clinical workflow and decision making, through expert observer studies and eventually clinical trials. Future developments in the areas of machine and deep learning with their improved balance of interpretability and prediction will also continue to advance radiomic studies.

影像组学领域在医学物理领域持续增长，对于医学物理团体是一个令人兴奋的机会，可以参与到量化成像的安全迁移的最新研究中。医学和基于深度学习的模型，有潜力为临床医生提供DSS，以改进肿瘤学中的诊断、治疗选择和响应评估。随着这个领域的扩张，将影像组学特征与其他临床和生物学变量联系起来的需求，会变得越来越重要。这个领域应当持续努力进行数据采集、评估标准和汇报指南的标准化，以使这个领域成熟。数据共享对于开发大规模数据集是非常关键的，然后可以对影像组学模型进行合适的验证，需要协同起来在多个机构中进行模型验证。为将影像组学模型应用到临床实践，必须要对临床工作流和决策制定证明出改进，通过专家观察者的研究和最终的临床检验。在机器学习和深度学习领域未来的发展，在可解释性和预测能力的平衡，也会持续推动影像组学的发展。